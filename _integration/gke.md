---
title: GKE
description: This code acts as the foundation for the software and enables the developer
  to test the software before launching it. Code artifacts can include compiled code,
  setup scripts, test suites, generated objects and logs generated during testing
  and quality assurance.
permalink: "/integration/:title/"
layout: integrationtool
logo: "/images/integration/GKE-logo.png"
category: development tools
---

## Prerequisite :
 
* An existing Razorops account and GCP account
* Creating clusters on cloud GCP

**Github Repository :** https://github.com/Razorops-code/spring-boot.git 

You can create GKE cluster by following the official <a href="https://cloud.google.com/kubernetes-engine/docs/deploy-app-cluster#create_cluster" target="_blank"><b>documentation</b></a> or GUI model

After creating GKE cluster 

<br>

## Setting Up Cluster Access

<br>
To access a cluster using kubectl, you have to set up a Kubernetes configuration file (commonly known as a 'kubeconfig' file) for the cluster. The kubeconfig file (by default named config and stored in the $HOME/.kube directory) provides the necessary details to access the cluster. Having set up the kubeconfig file, you can start using kubectl to manage the cluster.  For razorops you can follow the process mentioned  here to access the cluster

<br>

## Next sign in to razorops with working github account

<br>
![](/images/integration/razorops-dashboard.png)
<br>
<br>

## Next move to kubernetes section and click on Add New 

<br>
![](/images/integration/GKE/razorops-create-kubernetes-clusters.png)
<br>
<br>

## Next you navigate to add your existing cluster window 

<br>
Here you can add name for cluster and authentication method 
Here we can go with kubernetes ConfigFile (which is generated by connect <a href="https://docs.razorops.com/guides/kubernetes/connect/" target="_blank">credentials</a> )

<br>
![](/images/integration/GKE/razorops-add-existing-cluster.png)
<br>
<br>

## The config file will look like

<br>
![](/images/integration/GKE/GKE-config-file.png)
<br>
<br>

## In authentication section: Just copy and paste and click on Create Cluster

<br>
![](/images/integration/GKE/razorops-authentication-section.png)
<br>
<br>

## Next your cluster will added to Razorops kubernetes section successfully show like 

<br>
![](/images/integration/GKE/razorops-kubernetes-clusters.png)
<br>
<br>

**Cluster added process completed with name Razo-gke**
<br>
**Next move to workflow section to run a pipeline for deploying our application on to kubernetes GKE cluster**


 
## Now your in workflow dashboard

<br>
![](/images/integration/GKE/razorops-dashbaord.png)
<br>

**You can navigate to the add a new pipeline dashboard by clicking on New Pipeline.**

<br>

## Select Github

<br>
![](/images/integration/grunt/razorops-add-new-pipeline.png)
<br>
<br>

## Select Repository

<br>
![](/images/integration/GKE/razorops-select-repository.png)
<br>
<br>

## And confirm it 

<br>
![](/images/integration/GKE/razorops-confirm-repository.png)
<br>
<br>

## Enter the razorops pipeline 

<br>
![](/images/integration/GKE/razorops-enter-pipeline.png)
<br>
<br>

```
tasks:
  build-job:
    steps:
    - checkout
    - commands:
      - |
        mvn clean package                  # build the package
        ls -a
        ls target
    - docker/build:
       image: razoropsrepocode/spring       # build the image with Dockerfile
       push: true                   # push image to docker hub repository Which is integrated  
       tags: ["latest-v2"]
        # kubernets deployment
  deploy-kubernets:
    when: branch == 'master' # only run if code is pushed to develop branch
    depends: [build-job]
    steps:
    - checkout
    - commands:
      - |
        kubectl create -f deployment.yml
        kubectl create -f service.yml
        kubectl get svc


```

<br>
<br>


**deployment.yml**

```
apiVersion: apps/v1
kind: Deployment
metadata:
   name: sample-java-app
spec:
   replicas: 1
   selector:
     matchLabels:
       app: java-app
   template:
     metadata:
       labels:
         app: java-app
    spec:
       containers:
       - name: java-app
         image: razoropsrepocode/spring:latest-v2
         imagePullPolicy: Always
         ports:
         - containerPort: 8080
```

<br>
<br>


**service.yml**
```
apiVersion: v1
kind: Service
metadata:
   name: sample-java-app
spec:
   type: NodePort
   ports:
   - port: 8080
     targetPort: 8080
   selector:
     app: java-app
```

<br>
<br>


## Next Run your first Build 

<br>
![](/images/integration/GKE/razorops-enter-pipeline.png)
<br>
<br>

## Next automatically 
<br>
* clone source code from repository  
* Build code with maven 
* Create image with dockerfile 
* Push the image from dockerhub repository
* Deploy the container on GKE cluster with kubernetes manifest file i.e (deployment.yml and service.yml )
* Access the application with NodePort ip service 

<br>
<br>

## After pipeline running succeeded 

<br>
![](/images/integration/GKE/razorops-pipeline-succeed.png)
<br>
<br>

## We can find logs in logs section 

<br>
![](/images/integration/GKE/application-running-logs.png)
<br>

**Successfully Sample-java-app pod up and running and works on NodePort-service- 30516**

<b>We can find <node-external-ip>:31103
In my case i.e  34.132.123.107:30516/spring3/

Note:- This application working on tomcat server we need to mention application name i.e spring3</b>

<br>
![](/images/integration/GKE/spring-application.png)
<br>